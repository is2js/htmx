{% extends 'picstragram/_page_base.html' %}

{% block meta %} {{ super() }} {% endblock meta %}
{% block css %} {{ super() }} {% endblock css %}
{% block title %}메인{% endblock title %}
{% block subtitle %}최신포스트{% endblock subtitle %}

{% block content %}
    <div class="container">
        <article class="post">
            <div class="contents">
                <div class="d-flex align-items-center mb-4">
                    <img class="img-fluid me-2"
                         style="width:20%!important;height: 20%!important;"
                         alt="100%x250"
                         src="{{ url_for('uploads', path='images/post-0001.jpeg') }}"
                    >
                    <h5 class="fs-7 fw-bold">현재 입력된 내용</h5>
                </div>
                <form hx-put="{{ url_for('pic_update_post', post_id=1) }}"
                      hx-ext='json-enc'
                >
                    <textarea rows="2" class="form-control mt-3 mb-4 px-2"
                              name="content"
                              placeholder="수정할 내용 입력"></textarea>
                    <div class="d-flex align-items-center gap-2 text-sm mb-5 flex-wrap justify-content-center">
                        <button type="submit" class="btn btn-sm btn-dark rounded-pill px-3 py-1">수정</button>
                        <button class="btn btn-sm btn-outline-secondary rounded-pill px-3 py-1">취소</button>
                    </div>
                </form>
            </div>
        </article>
    </div>

    {% for post in posts %}
        <div class="container">
            <article class="post">
                <div class="header">
                    <a href="{{ url_for('pic_users') }}">
                        <img src="{{ url_for('uploads', path=post.user.image_url) }}" class="profile"
                             alt="{{ post.user.username }}"/>
                    </a>
                    <a href="{{ url_for('pic_users') }}">
                        <div class="name">{{ post.user.username }}</div>
                    </a>
                    <div class="time">{{ post.updated_at | feed_time }}</div>
                    {# https://icons.getbootstrap.com/?q= #}
                    <div class="header-icons">
                        <i class="bi bi-pencil"></i>
                        <i class="bi bi-trash3-fill"></i>
                    </div>
                </div>
                <div class="contents">
                    <img class="img-fluid" alt="100%x250" src="{{ url_for('uploads', path=post.image_url) }}">
                    {# 추가 텍스트 post.content + tag #}
                    <p class="fs-5 mt-3 mb-10 px-4">{{ post.content }}</p>
                    <div class="d-flex align-items-center gap-2 text-sm mb-5 flex-wrap">
                        {% for tag in post.tags %}
                            <a href="{{ url_for('pic_get_tag', tag_id=tag.id) }} "
                               class="btn btn-sm rounded-pill border-0 px-3 py-1"
                               style="background-color: #bebebe; color: black; transition: background-color 0.3s, color 0.3s;"
                               onmouseover="this.style.backgroundColor='black'; this.style.color='white';"
                               onmouseout="this.style.backgroundColor='#bebebe'; this.style.color='black';"
                            >
                                {{ tag.name }}
                            </a>
                        {% endfor %}
                    </div>
                </div>
                <div class="icons">
                    <div class="icons-left">
                        <i class="bi bi-heart"></i>
                        <i class="bi bi-chat"></i>
                        <i class="bi bi-send"></i>
                    </div>
                    <div class="icons-right">
                        <i class="bi bi-bookmark"></i>
                    </div>
                </div>
                <div class="comments">
                    {% for comment in post.comments %}
                        <div class="comment">
                            <div class="name">{{ comment.user.username }}</div>
                            <div class="comment">{{ comment.text }}</div>
                        </div>
                    {% endfor %}
                </div>
                <div class="add-comment">
                    <input type="text" class="form-control" id="comment" placeholder="댓글 달기...">
                </div>
            </article>
        </div>
    {% endfor %}

    <div class="container">
        <article class="post">
            <div class="header">
                {#<a href="user.html"><img src="images/user2.png" class="profile" alt="사용자2" /></a>#}
                <a href="{{ url_for('pic_users') }}">
                    <img src="{{ url_for('static', path='images/user2.png') }}" class="profile" alt="사용자2"/>
                </a>
                <a href="{{ url_for('pic_users') }}">
                    <div class="name">사용자2</div>
                </a>
                <div class="time">1시간</div>
            </div>
            <div class="contents">
                {#<img class="img-fluid" alt="100%x250" src="./images/post-0004.jpeg">#}
                <img class="img-fluid" alt="100%x250" src="{{ url_for('static', path='images/post-0004.jpeg') }}">
            </div>
            <div class="icons">
                <div class="icons-left">
                    <i class="bi bi-heart"></i>
                    <i class="bi bi-chat"></i>
                    <i class="bi bi-send"></i>
                </div>
                <div class="icons-right">
                    <i class="bi bi-bookmark"></i>
                </div>
            </div>
            <div class="comments">
                <div class="comment">
                    <div class="name">거깃섭</div>
                    <div class="comment">음식 사진만 찍으시나요?</div>
                </div>
                <div class="comment">
                    <div class="name">지나가던사람</div>
                    <div class="comment">마늘이 없네?</div>
                </div>
                <div class="comment">
                    <div class="name">너드너드</div>
                    <div class="comment">안녕하세요</div>
                </div>
            </div>
            <div class="add-comment">
                <input type="text" class="form-control" id="comment" placeholder="댓글 달기...">
            </div>
        </article>
    </div>
{% endblock content %}